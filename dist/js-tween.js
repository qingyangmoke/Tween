/*!
 * js-tween
 * Description: tween 动画缓动库
 * Author: 清扬陌客
 * Version: v0.0.1
 * Github: https://github.com/qingyangmoke/js-tween.git
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Tween=t():e.Tween=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return new m(new d.default(e,{ease:t.ease,duration:t.duration}),Object.assign(_.defaultOptions,t))}var u=n(2),a=i(u),s=n(3),l=i(s),f=n(4),c=n(5),p=r(c),y=n(7),d=i(y),h=n(8),v=i(h),_=n(6),k="0.0.1",m=l.default;m.pool=f.pool,m.VERSION=k,m.easings=a.default,m.update=function(e){e=e||Date.now(),f.pool.each(function(t){t.playing&&t.update(e)})},m.killOf=function(e){if(e instanceof m)e.kill();else{var t=f.pool.find(e);t&&(p.arr(t)?t.forEach(function(e){return e.kill()}):t.kill())}},m.killAll=function(){f.pool.each(function(e){e.kill()}),f.pool.removeAll()},m.to=function(e,t,n){var r=o(e,n);return r._engine.to(t),r},m.from=function(e,t,n){var r=o(e,n);return r._engine.from(t),r},m.fromTo=function(e,t,n,r){var i=o(e,r);return i._engine.fromTo(t,n),i},m.Timeline=v.default,e.exports=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.pow,r=Math.cos,i=Math.sin,o=Math.sqrt,u=Math.PI,a={Sine:function(e){return 1-r(e*u/2)},Circ:function(e){return 1-o(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-n(2,8*(e-1))*i((80*(e-1)-7.5)*u/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t=void 0,r=4;e<((t=n(2,--r))-1)/11;);return 1/n(4,3-r)-7.5625*n((3*t-2)/22-e,2)}},s=["Quad","Cubic","Quart","Quint","Expo"];s.forEach(function(e,t){a[e]=function(e){return n(e,t+2)}});var l={linear:function(e){return e},swing:function(e){return.5-r(e*u)/2}},f=function(e){var t=a[e];l["easeIn"+e]=t,l["easeOut"+e]=function(e){return 1-t(1-e)},l["easeInOut"+e]=function(e){return e<.5?t(2*e)/2:1-t(e*-2+2)/2}};for(var c in a)f(c);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),u=n(6),a="update",s="loop",l="complete",f=0,c=1,p=2,y=function(){function e(t,n){r(this,e),this.options=Object.assign(u.defaultOptions,n||{}),this.id=(0,o.newId)(),this._engine=t,this._elapsedMS=0,this._seekSegment=-1,this._state=f,this._pausedTime=0,this._startTime=0,this._killed=!1,this._lastTime=0,this._playback=!1,this._timeScale=1}return i(e,[{key:"timeScale",value:function(e){e<=0||(this._timeScale=e)}},{key:"_invoke",value:function(e,t){var n=this.options;n[e]&&n[e](t)}},{key:"reset",value:function(){var e=this;e._state=f,e._engine.reset(0),e._elapsedMS=0,e._killed=!1,e._playback=!1,e._seekSegment=-1}},{key:"playback",value:function(){var e=this;e.pause(),e._killed=!1,e._playback=!0,e.resume()}},{key:"play",value:function(e){if(!this._killed){var t=this,n=Date.now();if(t._lastTime=n,!e&&t.paused)t._startTime+=n-t._pausedTime,t._state=c;else{if(!e&&t.playing)return;t.reset(),t._startTime=n+t.options.delay,t._state=c}o.pool.add(t)}}},{key:"pause",value:function(e){var t=this;(e||t.playing||!this.paused)&&(t._pausedTime=Date.now(),t._state=p,o.pool.remove(t))}},{key:"resume",value:function(){var e=this;e.play(e._state===f)}},{key:"stop",value:function(e){var t=this;t._state=f,t._timeScale=1,e&&t.reset(),o.pool.remove(t)}},{key:"toggle",value:function(){var e=this;e.paused?e.resume():this.playing?e.pause():e.play()}},{key:"seek",value:function(e){var t=Date.now();this._lastTime=t,this._seekSegment=-1,this._updateSeek(t,!0)}},{key:"kill",value:function(){var e=this;e._killed||(e._killed=!0,o.pool.remove(e))}},{key:"update",value:function(e){var t=this;t._killed||t._state===c&&t._updateSeek(e)}},{key:"_updateSeek",value:function(e,t){var n=this,r=(e-n._lastTime)/n._timeScale;n._lastTime=e,n._elapsedMS+=n._playback?-r:r;var i=n.options,o=i.delay,u=i.duration,f=i.repeatDelay,c=i.yoyo,p=i.repeat,y=i.autoKill,d=u+f,h=n._elapsedMS-o,v=h%d;h<0&&(v=0,h=0);var _=Math.floor(h/d),k=!1;c&&(k=_%2!==0),v>=u&&(_++,v=u),n._seekSegment!==v&&((n._engine.seek(v,k)||n._seekSegment===-1)&&n._invoke(a),n._seekSegment=v),t||(n._playback?h<=0&&(n.stop(),n._invoke(l),y&&n.kill(),n._playback=!1):_<p||p===-1?(n._startTime=e+f,n._invoke(s,_)):(n.stop(),n._invoke(l),y&&n.kill()))}},{key:"replay",value:function(){this.play(!0)}},{key:"paused",get:function(){return this._state===p}},{key:"playing",get:function(){return this._state===c}}]),e}();t.default=y},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){a(e)&&(d[e.id]=null,delete d[e.id])}function o(e){for(var t in d)y.ownProperty(d,t)&&e(d[t])}function u(e){if(!e)return null;if(y.str(e))return d[e];var t=[];return o(function(n){n.obj===e&&t.push(e)}),t}function a(e){return e.id in d}function s(e){a(e)||(d[e.id]=e)}function l(e){return y.arr(e)?void e.forEach(function(e){i(e)}):i(e)}function f(){d={}}function c(){return(++h).toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.pool=void 0,t.newId=c;var p=n(5),y=r(p),d={},h=0;t.pool={removeAll:f,remove:l,add:s,has:a,find:u,each:o}},function(e,t){"use strict";function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e){return"string"==typeof e}function i(e){return"object"===("undefined"==typeof e?"undefined":a(e))}function o(e){return"number"==typeof e}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.arr=n,t.str=r,t.obj=i,t.num=o,t.ownProperty=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;var i=n(2),o=r(i);t.defaultOptions={duration:500,repeat:0,delay:0,ease:o.default.swing,ignoreCheckKey:!1,autoKill:!0,repeatDelay:0,yoyo:!1}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){var i=r.ease,o=r.duration;n(this,e);var u=this;u.target=t,u.duration=o,u.ease=i,u.pos=-1}return r(e,[{key:"_v",value:function(e,t,n){var r=this,i={},o={},u=[],a=r.target;for(var s in n)s in a&&r._valid(a[s])&&(i[s]=e[s]||(0===e[s]?0:a[s]),o[s]=t[s]||(0===t[s]?0:a[s]),u.push(s));return r._from=i,r._to=o,r._keys=u,r}},{key:"from",value:function(e){return this._v(e,this.target,e)}},{key:"to",value:function(e){return this._v(this.target,e,e)}},{key:"fromTo",value:function(e,t){return this._v(e,t,e)}},{key:"_valid",value:function(e){return e=+e,e===e}},{key:"reset",value:function(){this.seek(0,!1,!0)}},{key:"_set",value:function(e,t){var n=this;e=n.ease(e),t&&(e=1-e),n._keys.forEach(function(t){var r=n._from[t],i=n._to[t];n.target[t]=r+(i-r)*e})}},{key:"seek",value:function e(t,n,r){var i=this,e=n?i.duration-t:t;return!(i.pos===e&&!r)&&(this.pos=e,i._set(t/i.duration,n),!0)}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(3),c=i(f),p=n(5),y=r(p),d=n(7),h=i(d),v=n(6),_=function(){function e(t){a(this,e),this.tweens=[],this.seekPointer=0,this.options=t,this.keys=[]}return l(e,[{key:"reset",value:function(){for(var e=this.tweens,t=e.length-1;t>=0;t--){var n=e[t];n.reset(),n.running=!1}}},{key:"seek",value:function(e,t,n){t=t||!1,n=n||!1;var r=!1;return t&&(e=this.duration-e),this.tweens.forEach(function(i){var o=i.start<=e&&i.end>=e;if(o){var u=Math.min(i.duration,Math.max(0,e-i.start));i.seek(t?i.duration-u:u,t,n)&&(r=!0),i.running=!0}else(i.running||n)&&(i.running=!1,t&&i.start>e?i.seek(0,!1)&&(r=!0):!t&&i.end<e&&i.seek(i.duration,!1)&&(r=!0))}),r}},{key:"_parse",value:function(e,t){var n=/^(\+=|-=)/.exec(e);if(!n)return e;var r=+t,i=+e.replace(n[0],"");switch(n[0]){case"+=":return r+i;case"-=":return r-i;default:throw new Error("格式错误")}}},{key:"_add",value:function(e,t,n){n=n||0===n?n:this.seekPointer;var r=t,i=v.defaultOptions.ease;y.obj(t)&&(r=t.duration,i=t.ease),t=r;var o=new h.default(e,{ease:i,duration:t});return y.num(n)||(n=this._parse(n,this.seekPointer)),o.running=!1,o.start=n,o.end=n+t,this.duration=Math.max(this.seekPointer,o.end),this.seekPointer=o.end,o}},{key:"_updateKeys",value:function(e){if(!this.ignoreCheckKey){var t=null,n=e.target;this.keys.forEach(function(e){e.target===n&&(t=e)}),t||(t={target:n,keys:[]},this.keys.push(t)),e._keys.forEach(function(e){t.keys.indexOf(e)===-1&&t.keys.push(e)})}}},{key:"_keys",value:function(e){var t=null;return this.keys.forEach(function(n){n.target===e&&(t=n.keys)}),t}},{key:"init",value:function(){var e=this;this.ignoreCheckKey||this.tweens.forEach(function(t){var n=e._keys(t.target);n&&n.forEach(function(n){t._keys.indexOf(n)===-1&&(e.seek(t.start,!1,!0),t._from[n]=t.target[n],e.seek(t.end,!1,!0),t._to[n]=t.target[n],t._keys.push(n))})})}},{key:"to",value:function(e,t,n,r){var i=this._add(e,n,r);this.seek(i.start,!1,!0),i.to(t),i.running=!1,this._updateKeys(i),this.tweens.push(i),this.reset()}},{key:"from",value:function(e,t,n,r){var i=this._add(e,n,r);this.seek(i.start,!1,!0),i.from(t),this._updateKeys(i),this.tweens.push(i),this.reset()}},{key:"fromTo",value:function(e,t,n,r,i){var o=this._add(e,r,i);o.fromTo(t,n),this._updateKeys(o),this.tweens.push(o)}},{key:"ignoreCheckKey",get:function(){return this.options.ignoreCheckKey}},{key:"duration",get:function(){return this.options.duration},set:function(e){this.options.duration=e}}]),e}(),k=function(e){function t(e){a(this,t),e=Object.assign({autoKill:!1},e);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,e));return n._engine=new _(n.options),n._inited=!1,n}return u(t,e),l(t,[{key:"init",value:function(){this._inited||(this._inited=!0,this._engine.init())}},{key:"play",value:function(e){this.init(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this,e)}},{key:"to",value:function(e,t,n,r){this._engine.to(e,t,n,r),this.seek(0),this._inited=!1}},{key:"from",value:function(e,t,n,r){this._engine.from(e,t,n,r),this.seek(0),this._inited=!1}},{key:"fromTo",value:function(e,t,n,r,i){this._engine.fromTo(e,t,n,r,i),this.seek(0),this._inited=!1}}]),t}(c.default);t.default=k}])});